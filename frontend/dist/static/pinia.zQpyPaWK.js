import{r as t,m as n,ao as e,l as s,ax as o,t as c,n as a,af as r,an as i,j as u,k as f,g as l,h as p,q as h,ay as y,J as d}from"./@vue.CTPu-uAZ.js";let b;const v=t=>b=t,_=Symbol();function j(t){return t&&"object"==typeof t&&"[object Object]"===Object.prototype.toString.call(t)&&"function"!=typeof t.toJSON}var O,m;function $(){const n=e(!0),s=n.run(()=>t({}));let o=[],c=[];const a=i({install(t){v(a),a._a=t,t.provide(_,a),t.config.globalProperties.$pinia=a,c.forEach(t=>o.push(t)),c=[]},use(t){return this._a?o.push(t):c.push(t),this},_p:o,_a:null,_e:n,_s:new Map,state:s});return a}(m=O||(O={})).direct="direct",m.patchObject="patch object",m.patchFunction="patch function";const g=()=>{};function S(t,n,e,s=g){t.push(n);const o=()=>{const e=t.indexOf(n);e>-1&&(t.splice(e,1),s())};return!e&&l()&&p(o),o}function P(t,...n){t.slice().forEach(t=>{t(...n)})}const E=t=>t(),w=Symbol(),x=Symbol();function I(t,n){t instanceof Map&&n instanceof Map?n.forEach((n,e)=>t.set(e,n)):t instanceof Set&&n instanceof Set&&n.forEach(t.add,t);for(const e in n){if(!n.hasOwnProperty(e))continue;const c=n[e],a=t[e];j(a)&&j(c)&&t.hasOwnProperty(e)&&!s(c)&&!o(c)?t[e]=I(a,c):t[e]=c}return t}const M=Symbol();function k(t){return!j(t)||!Object.prototype.hasOwnProperty.call(t,M)}const{assign:A}=Object;function F(t){return!(!s(t)||!t.effect)}function J(r,i,u={},l,p,h){let y;const d=A({actions:{}},u),b={deep:!0};let _,j,m,$=[],M=[];const J=l.state.value[r];let q;function C(t){let n;_=j=!1,"function"==typeof t?(t(l.state.value[r]),n={type:O.patchFunction,storeId:r,events:m}):(I(l.state.value[r],t),n={type:O.patchObject,payload:t,storeId:r,events:m});const e=q=Symbol();a().then(()=>{q===e&&(_=!0)}),j=!0,P($,n,l.state.value[r])}h||J||(l.state.value[r]={}),t({});const N=h?function(){const{state:t}=u,n=t?t():{};this.$patch(t=>{A(t,n)})}:g;const W=(t,n="")=>{if(w in t)return t[x]=n,t;const e=function(){v(l);const n=Array.from(arguments),s=[],o=[];let c;P(M,{args:n,name:e[x],store:B,after:function(t){s.push(t)},onError:function(t){o.push(t)}});try{c=t.apply(this&&this.$id===r?this:B,n)}catch(a){throw P(o,a),a}return c instanceof Promise?c.then(t=>(P(s,t),t)).catch(t=>(P(o,t),Promise.reject(t))):(P(s,c),c)};return e[w]=!0,e[x]=n,e},z={_p:l,$id:r,$onAction:S.bind(null,M),$patch:C,$reset:N,$subscribe(t,n={}){const e=S($,t,n.detached,()=>s()),s=y.run(()=>f(()=>l.state.value[r],e=>{("sync"===n.flush?j:_)&&t({storeId:r,type:O.direct,events:m},e)},A({},b,n)));return e},$dispose:function(){y.stop(),$=[],M=[],l._s.delete(r)}},B=n(z);l._s.set(r,B);const D=(l._a&&l._a.runWithContext||E)(()=>l._e.run(()=>(y=e()).run(()=>i({action:W}))));for(const t in D){const n=D[t];if(s(n)&&!F(n)||o(n))h||(J&&k(n)&&(s(n)?n.value=J[t]:I(n,J[t])),l.state.value[r][t]=n);else if("function"==typeof n){const e=W(n,t);D[t]=e,d.actions[t]=n}}return A(B,D),A(c(B),D),Object.defineProperty(B,"$state",{get:()=>l.state.value[r],set:t=>{C(n=>{A(n,t)})}}),l._p.forEach(t=>{A(B,y.run(()=>t({store:B,app:l._a,pinia:l,options:d})))}),J&&h&&u.hydrate&&u.hydrate(B.$state,J),_=!0,j=!0,B}function q(t,n,e){let s;const o="function"==typeof n;function c(e,c){const a=y();(e=e||(a?h(_,null):null))&&v(e),(e=b)._s.has(t)||(o?J(t,n,s,e):function(t,n,e){const{state:s,actions:o,getters:c}=n,a=e.state.value[t];let f;f=J(t,function(){a||(e.state.value[t]=s?s():{});const n=r(e.state.value[t]);return A(n,o,Object.keys(c||{}).reduce((n,s)=>(n[s]=i(u(()=>{v(e);const n=e._s.get(t);return c[s].call(n,n)})),n),{}))},n,e,0,!0)}(t,s,e));return e._s.get(t)}return s=o?e:n,c.$id=t,c}function C(t){const n=c(t),e={};for(const c in n){const a=n[c];a.effect?e[c]=u({get:()=>t[c],set(n){t[c]=n}}):(s(a)||o(a))&&(e[c]=d(t,c))}return e}export{$ as c,q as d,C as s};
