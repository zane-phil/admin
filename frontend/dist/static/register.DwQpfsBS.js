import{u as e}from"./vue-router.kfYy4LLd.js";import{_ as a,b as s,A as l,s as t,i as o,u as r,h as i}from"./index.CmK67jVc.js";import{r as n,b as c,al as p,K as m,o as d,L as u,T as g,u as f,Q as h,a5 as j,c as v,a as y,R as b}from"./@vue.CTPu-uAZ.js";import{a as w}from"./element-plus.BU70F6Fx.js";import{P as _,B as k}from"./tsParticles.C10nsZtR.js";import"./axios.DpIj8wd6.js";import"./crypto-js.CDMBIImi.js";import"./clipboard.DkQLcScs.js";import"./js-cookie.Ch5AnFJE.js";import"./pinia.zQpyPaWK.js";import"./@element-plus.DmP6zw14.js";import"./xe-utils.D2X37hqE.js";import"./sortablejs.C7MwSjUq.js";import"./vue-i18n.Diqqvor5.js";import"./@intlify.CzB25nlE.js";import"./file-saver.B7Ix4MNR.js";import"./lodash-es.inYd2OMh.js";import"./pinia-plugin-persistedstate.C_byIVBZ.js";import"./destr.WfmzGWA8.js";import"./deep-pick-omit.CDZeMyKV.js";import"./nprogress.CyzJYN2f.js";import"./@tsparticles.Csp0zpCD.js";import"./@vueuse.CxA-JytG.js";import"./@popperjs.CT_jBSb5.js";import"./@ctrl.D-8vaqgC.js";import"./dayjs.Gu-B5VJn.js";import"./async-validator.j0i5Y79Y.js";import"./memoize-one.BAtLgO95.js";import"./normalize-wheel-es.BhHBPXsK.js";import"./@floating-ui.CzXNizXq.js";const x=a({__name:"moduleRegisterForm",setup(a){const r=s(),i=window.location.origin;e();let v=n({username:"",password:"",captcha:"",captchaKey:null}),y=n(null),b=n({username:[{required:!0,message:"\u8bf7\u8f93\u5165\u8d26\u53f7",trigger:"blur"}],password:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801",trigger:"blur"}],captcha:[{required:!0,message:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",trigger:"blur"}]}),_=n(!1);function k(){l.getCaptcha().then(e=>{2e3==e.code?(v.value.captcha=null,v.value.captchaKey=e.data.key,y.value=e.data.image_base):w.error(e.msg)})}let x=n(null);const V=async()=>{if(!_.value)try{_.value=!0,await x.value.validate();const e=await l.getToken(v.value);2e3===e.code?(t("logintoken",e.data.access),o("refreshtoken",e.data.refresh),r.userInfo.username=v.value.username,window.location.href=i+"/#/",w.success("\u767b\u5f55\u6210\u529f")):(w.error(e.msg||"\u767b\u5f55\u5931\u8d25"),k())}catch(e){e.fields?w.warning("\u8bf7\u586b\u5199\u6b63\u786e\u7684\u767b\u5f55\u4fe1\u606f"):w.error("\u767b\u5f55\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5")}finally{_.value=!1}};return c(()=>{k()}),(e,a)=>{const s=p("el-input"),l=p("el-form-item"),t=p("ly-img"),o=p("el-button"),r=p("el-form");return d(),m(r,{ref_key:"loginFormRef",ref:x,model:f(v),rules:f(b),"label-width":"0",size:"large",onKeyup:j(V,["enter"]),disabled:f(_)},{default:u(()=>[g(l,{prop:"username"},{default:u(()=>[g(s,{modelValue:f(v).username,"onUpdate:modelValue":a[0]||(a[0]=e=>f(v).username=e),"prefix-icon":"user",clearable:"",placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"},null,8,["modelValue"])]),_:1}),g(l,{prop:"password"},{default:u(()=>[g(s,{modelValue:f(v).password,"onUpdate:modelValue":a[1]||(a[1]=e=>f(v).password=e),"prefix-icon":"lock",clearable:"","show-password":"",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"},null,8,["modelValue"])]),_:1}),g(l,{prop:"captcha"},{default:u(()=>[g(s,{type:"text","prefix-icon":"circle-check",modelValue:f(v).captcha,"onUpdate:modelValue":a[2]||(a[2]=e=>f(v).captcha=e),modelModifiers:{trim:!0},"auto-complete":"off",placeholder:"\u9a8c\u8bc1\u7801"},{append:u(()=>[g(t,{class:"login-captcha",src:f(y),onClick:k},null,8,["src"])]),_:1},8,["modelValue"])]),_:1}),g(l,null,{default:u(()=>[g(o,{type:"primary",class:"login-btn",style:{width:"100%"},loading:f(_),round:"",onClick:V},{default:u(()=>[...a[3]||(a[3]=[h("\u6ce8\u518c",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules","disabled"])}}},[["__scopeId","data-v-47af6042"]]),V={class:"login-container"},C={class:"background-layer"},P={class:"login-card"},T={class:"theme-toggle"},q={class:"login-content"},A={class:"brand-section"},z={class:"logo-wrapper"},E={class:"card-footer"},K={class:"login-footer"},R={class:"copyright"},I={class:"version"},S=a({__name:"register",setup(a){const l=s(),t=e(),o=r();function n(){o.setSiteTheme("light"===o.siteTheme?"dark":"light")}c(()=>{l.getSystemConfig();const e=document.querySelector("meta[name='viewport']")||document.createElement("meta");e.name="viewport",e.content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no",document.head.appendChild(e)});const m=()=>{t.push("/login")};return(e,a)=>{const s=p("el-button"),t=p("el-tooltip"),r=p("ly-img"),c=p("el-link");return d(),v("div",V,[y("div",C,[g(_),a[0]||(a[0]=y("div",{class:"gradient-overlay"},null,-1))]),y("div",P,[y("div",T,[g(t,{content:"dark"==f(o).siteTheme?"\u5207\u6362\u81f3\u4eae\u8272\u6a21\u5f0f":"\u5207\u6362\u81f3\u6697\u8272\u6a21\u5f0f"},{default:u(()=>[g(s,{icon:"dark"==f(o).siteTheme?"sunny":"moon",circle:"",class:"theme-btn",onClick:n},null,8,["icon"])]),_:1},8,["content"])]),y("div",q,[y("div",A,[y("div",z,[g(r,{alt:f(i).APP_NAME,src:f(l).sysConfig.logo,class:"logo-image"},null,8,["alt","src"])]),a[1]||(a[1]=y("h1",{class:"app-name"},"\u7acb\u5373\u6ce8\u518c",-1)),a[2]||(a[2]=y("p",{class:"welcome-text"},"\u52a0\u5165\u6211\u4eec\u7684\u793e\u533a\uff0c\u5f00\u542f\u5168\u65b0\u4f53\u9a8c",-1))]),g(x)]),y("div",E,[a[4]||(a[4]=y("span",null,"\u5df2\u6709\u8d26\u6237\uff1f",-1)),g(c,{type:"primary",underline:!1,onClick:m},{default:u(()=>[...a[3]||(a[3]=[h("\u7acb\u5373\u767b\u5f55",-1)])]),_:1})]),y("div",K,[y("p",R,[a[5]||(a[5]=h("\xa9 2025 lybbn All rights reserved. ",-1)),y("span",I,"v"+b(f(i).APP_VER),1)])])]),g(k)])}}},[["__scopeId","data-v-5849e91c"]]);export{S as default};
