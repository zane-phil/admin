import{l as e,j as l,A as a,_ as t,b as o}from"./index.CmK67jVc.js";import{a as u,c as i}from"./element-plus.BU70F6Fx.js";import{r as d,al as n,c as r,o as s,T as p,L as m,Q as c,K as f,O as y,M as v,S as b,a7 as _,U as g,j as h,G as k,af as V,k as w,b as x,ar as U,R as j,a as C,u as S,l as T,n as E,d as D,Y as O}from"./@vue.CTPu-uAZ.js";import{R as P}from"./wangEditor.CnbmLdp2.js";import{p as L}from"./single-picture.UsFIXBse.js";import{u as A}from"./@vueuse.CxA-JytG.js";import"./crypto-js.CDMBIImi.js";import"./js-cookie.Ch5AnFJE.js";import"./clipboard.DkQLcScs.js";import"./axios.DpIj8wd6.js";import"./pinia.zQpyPaWK.js";import"./@element-plus.DmP6zw14.js";import"./xe-utils.D2X37hqE.js";import"./sortablejs.C7MwSjUq.js";import"./vue-i18n.Diqqvor5.js";import"./@intlify.CzB25nlE.js";import"./file-saver.B7Ix4MNR.js";import"./lodash-es.inYd2OMh.js";import"./pinia-plugin-persistedstate.C_byIVBZ.js";import"./destr.WfmzGWA8.js";import"./deep-pick-omit.CDZeMyKV.js";import"./vue-router.kfYy4LLd.js";import"./nprogress.CyzJYN2f.js";import"./@tsparticles.Csp0zpCD.js";import"./@popperjs.CT_jBSb5.js";import"./@ctrl.D-8vaqgC.js";import"./dayjs.Gu-B5VJn.js";import"./async-validator.j0i5Y79Y.js";import"./memoize-one.BAtLgO95.js";import"./normalize-wheel-es.BhHBPXsK.js";import"./@floating-ui.CzXNizXq.js";import"./@wangeditor.Cjvb5x3F.js";const R={__name:"addModuleGroup",emits:["refreshData"],setup(t,{expose:o,emit:i}){const f=i,y=d(!1),v=d(!1),b=d(""),_=d(null),g=d({title:"",key:""}),h={title:[{required:!0,message:"\u8bf7\u8f93\u5165\u5206\u7ec4\u540d\u79f0",trigger:"blur"}],key:[{required:!0,message:"\u8bf7\u8f93\u5165key\u503c",trigger:"blur"}]},k=()=>{y.value=!1,v.value=!1,g.value={title:"",key:""},f("refreshData")},V=async()=>{try{if(!(await _.value.validate()))return;v.value=!0;const e={...g.value},l=e.id?a.platformsettingsSysconfigEdit:a.platformsettingsSysconfigAdd,t=await l(e);2e3===t.code?(u.success(t.msg),k()):u.warning(t.msg)}catch(e){}finally{v.value=!1}};return o({addModuleFn:(e,a)=>{b.value=a,y.value=!0,e&&(g.value=l(e))}}),(l,a)=>{const t=n("el-input"),o=n("el-form-item"),u=n("el-form"),i=n("el-button");return s(),r("div",null,[p(e,{modelValue:y.value,"onUpdate:modelValue":a[2]||(a[2]=e=>y.value=e),title:b.value,width:"560px","before-close":k},{footer:m(()=>[p(i,{onClick:k,loading:v.value},{default:m(()=>[...a[3]||(a[3]=[c("\u53d6\u6d88",-1)])]),_:1},8,["loading"]),p(i,{type:"primary",onClick:V,loading:v.value},{default:m(()=>[...a[4]||(a[4]=[c("\u786e\u5b9a",-1)])]),_:1},8,["loading"])]),default:m(()=>[p(u,{inline:!1,model:g.value,rules:h,ref_key:"formRef",ref:_,"label-position":"right","label-width":"auto"},{default:m(()=>[p(o,{label:"\u5206\u7ec4\u540d\u79f0",prop:"title"},{default:m(()=>[p(t,{modelValue:g.value.title,"onUpdate:modelValue":a[0]||(a[0]=e=>g.value.title=e),placeholder:"\u8bf7\u8f93\u5165\u5206\u7ec4\u540d\u79f0"},null,8,["modelValue"])]),_:1}),p(o,{label:"key\u503c",prop:"key"},{default:m(()=>[p(t,{modelValue:g.value.key,"onUpdate:modelValue":a[1]||(a[1]=e=>g.value.key=e),placeholder:"\u8bf7\u8f93\u5165key\u503c"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},q={__name:"addModuleContent",emits:["refreshData"],setup(t,{expose:o,emit:i}){const h=i,k=d(!1),V=d(!1),w=d(""),x=d(null),U=d({parent:null,title:null,key:null,form_item_type:null,rule:null,placeholder:null,data_options:null,tip:null,sort:0}),j={title:[{required:!0,message:"\u8bf7\u8f93\u5165\u5206\u7ec4\u540d\u79f0",trigger:"blur"}],key:[{required:!0,message:"\u8bf7\u8f93\u5165key\u503c",trigger:"blur"}],form_item_type:[{required:!0,message:"\u8bf7\u9009\u62e9\u8868\u5355\u7c7b\u578b",trigger:"blur"}]},C=d([]),S=d([{label:"\u5fc5\u586b\u9879",value:'{"required": true, "message": "\u5fc5\u586b\u9879\u4e0d\u80fd\u4e3a\u7a7a"}'},{label:"\u90ae\u7bb1",value:'{ "type": "email", "message": "\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u7bb1\u5730\u5740"}'},{label:"URL\u5730\u5740",value:'{ "type": "url", "message": "\u8bf7\u8f93\u5165\u6b63\u786e\u7684URL\u5730\u5740"}'},{label:"\u6570\u5b57",value:'{"type": "number", "message": "\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u6570\u5b57"}'}]),T=d([{id:0,name:"text"},{id:3,name:"textarea"},{id:5,name:"checkbox"},{id:6,name:"radio"},{id:7,name:"image"},{id:8,name:"singlefile"},{id:9,name:"switch"},{id:10,name:"number"},{id:14,name:"richtext"}]);d([{id:0,name:"text"},{id:1,name:"datetime"},{id:2,name:"date"},{id:3,name:"textarea"},{id:4,name:"select"},{id:5,name:"checkbox"},{id:6,name:"radio"},{id:7,name:"image"},{id:8,name:"file"},{id:9,name:"switch"},{id:10,name:"number"},{id:11,name:"array"},{id:12,name:"images"},{id:13,name:"time"},{id:14,name:"richtext"}]);const E=()=>{k.value=!1,V.value=!1,U.value={parent:null,title:null,key:null,form_item_type:null,rule:null,placeholder:null,data_options:null,tip:null,sort:0}},D=()=>{(async()=>{try{const e=await a.platformsettingsSysconfig({limit:999,parent__isnull:!0});2e3===e.code&&(C.value=e.data.data)}catch(e){}})()},O=async()=>{try{if(!(await x.value.validate()))return;V.value=!0;const e={...U.value},l=e.id?a.platformsettingsSysconfigEdit:a.platformsettingsSysconfigAdd,t=await l(e);if(2e3===t.code){u.success(t.msg);const e=C.value.find(e=>e.id===U.value.parent);h("refreshData",e),E()}else u.warning(t.msg)}catch(e){u.error("\u64cd\u4f5c\u5931\u8d25")}finally{V.value=!1}};return o({addModuleFn:(e,a)=>{w.value=a,k.value=!0,e&&(U.value=l(e)),D()}}),(l,a)=>{const t=n("el-option"),o=n("el-select"),u=n("el-form-item"),i=n("el-input"),d=n("el-input-number"),h=n("el-form"),D=n("el-button");return s(),r("div",null,[p(e,{modelValue:k.value,"onUpdate:modelValue":a[9]||(a[9]=e=>k.value=e),title:w.value,width:"560px","before-close":E},{footer:m(()=>[p(D,{onClick:E,loading:V.value},{default:m(()=>[...a[10]||(a[10]=[c("\u53d6\u6d88",-1)])]),_:1},8,["loading"]),p(D,{type:"primary",onClick:O,loading:V.value},{default:m(()=>[...a[11]||(a[11]=[c("\u786e\u5b9a",-1)])]),_:1},8,["loading"])]),default:m(()=>[p(h,{inline:!1,model:U.value,rules:j,ref_key:"formRef",ref:x,"label-position":"right","label-width":"auto"},{default:m(()=>[p(u,{label:"\u6240\u5c5e\u5206\u7ec4",prop:"parent"},{default:m(()=>[p(o,{modelValue:U.value.parent,"onUpdate:modelValue":a[0]||(a[0]=e=>U.value.parent=e),placeholder:"\u8bf7\u9009\u62e9\u5206\u7ec4",clearable:"",style:{width:"100%"}},{default:m(()=>[(s(!0),r(b,null,_(C.value,(e,l)=>(s(),f(t,{key:l,label:e.title,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),p(u,{label:"\u6807\u9898",prop:"title"},{default:m(()=>[p(i,{modelValue:U.value.title,"onUpdate:modelValue":a[1]||(a[1]=e=>U.value.title=e),placeholder:"\u8bf7\u8f93\u5165",clearable:""},null,8,["modelValue"])]),_:1}),p(u,{label:"key\u503c",prop:"key"},{default:m(()=>[p(i,{modelValue:U.value.key,"onUpdate:modelValue":a[2]||(a[2]=e=>U.value.key=e),placeholder:"\u8bf7\u8f93\u5165",clearable:""},null,8,["modelValue"])]),_:1}),p(u,{label:"\u8868\u5355\u7c7b\u578b",prop:"form_item_type"},{default:m(()=>[p(o,{modelValue:U.value.form_item_type,"onUpdate:modelValue":a[3]||(a[3]=e=>U.value.form_item_type=e),placeholder:"\u8bf7\u9009\u62e9",clearable:"",style:{width:"100%"}},{default:m(()=>[(s(!0),r(b,null,_(T.value,(e,l)=>(s(),f(t,{key:l,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),[5,6].includes(U.value.form_item_type)?(s(),f(u,{key:0,label:"\u9009\u9879\u5b57\u5178",prop:"data_options"},{default:m(()=>[p(i,{modelValue:U.value.data_options,"onUpdate:modelValue":a[4]||(a[4]=e=>U.value.data_options=e),type:"textarea",rows:2,placeholder:"\u8bf7\u8f93\u5165\u5982[{'label':'\u542f\u7528','value':'1'},{'label':'\u7981\u7528','value':'0'}]"},null,8,["modelValue"])]),_:1})):y("",!0),v(p(u,{label:"\u6821\u9a8c\u89c4\u5219"},{default:m(()=>[p(o,{modelValue:U.value.rule,"onUpdate:modelValue":a[5]||(a[5]=e=>U.value.rule=e),multiple:"",placeholder:"\u8bf7\u9009\u62e9(\u53ef\u591a\u9009)",clearable:"",style:{width:"100%"}},{default:m(()=>[(s(!0),r(b,null,_(S.value,(e,l)=>(s(),f(t,{key:l,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},512),[[g,!1]]),p(u,{label:"\u63d0\u793a\u4fe1\u606f",prop:"placeholder"},{default:m(()=>[p(i,{modelValue:U.value.placeholder,"onUpdate:modelValue":a[6]||(a[6]=e=>U.value.placeholder=e),placeholder:"\u8bf7\u8f93\u5165",clearable:""},null,8,["modelValue"])]),_:1}),p(u,{label:"\u5e95\u90e8\u8bf4\u660e",prop:"tip"},{default:m(()=>[p(i,{modelValue:U.value.tip,"onUpdate:modelValue":a[7]||(a[7]=e=>U.value.tip=e),placeholder:"\u4e3a\u7a7a\u5219\u4e0d\u663e\u793a",clearable:""},null,8,["modelValue"])]),_:1}),p(u,{label:"\u6392\u5e8f",prop:"sort"},{default:m(()=>[p(d,{modelValue:U.value.sort,"onUpdate:modelValue":a[8]||(a[8]=e=>U.value.sort=e),min:0,max:999},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},N=t({__name:"lyInputNumber",props:{modelValue:{type:[Number,String]},min:{type:Number},max:{type:Number},step:{type:Number},precision:{type:Number},controls:{type:Boolean,default:!1},controlsPosition:{type:String,default:""},placeholder:{type:String,default:""},textAlign:{type:String,default:"left"},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(e,{emit:l}){const a=l,t=e,o=h({get:()=>"string"==typeof t.modelValue?parseFloat(t.modelValue):t.modelValue,set(e){a("update:modelValue",e)}});function u(e){a("change",e)}return(l,a)=>{const t=n("el-input-number");return s(),f(t,{modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=e=>o.value=e),onChange:u,min:e.min,max:e.max,step:e.step,precision:e.precision,controls:e.controls,"controls-position":e.controlsPosition,placeholder:e.placeholder,class:k(e.textAlign?"lyinputnumber_textalign_left":""),disabled:e.disabled},null,8,["modelValue","min","max","step","precision","controls","controls-position","placeholder","class","disabled"])}}},[["__scopeId","data-v-900469bb"]]),F={class:"form-container"},I={key:1},M={key:9,class:"tip-text"},G={class:"prefix"},z={key:1,class:"variable-name"},$={class:"action-buttons"},B=t({__name:"formItem",props:{options:{type:Object,default:()=>({})},activeTab:{type:String,default:""}},emits:["updateConfig"],setup(e,{expose:l,emit:t}){const o=t,g=e,{activeTab:h}=V(g),k=d(!1),T=d([]),E=d({}),D=d(null),O=async()=>{try{k.value=!0;const e=await a.platformsettingsSysconfig({parent:g.options.id,limit:999});T.value=e.data.data.map(e=>({...e,edit:!1,new_key:e.key})),E.value=T.value.reduce((e,l)=>(e[l.key]=l.value||(["checkbox","array"].includes(l.form_item_type_label)?[]:void 0),e),{})}catch(e){u.error("\u6570\u636e\u52a0\u8f7d\u5931\u8d25")}finally{k.value=!1}};w(()=>g.activeTab,e=>{e===g.options.key&&O()});return x(()=>{g.activeTab===g.options.key&&O()}),l({fetchData:O}),(e,l)=>{const t=n("el-input"),d=n("el-table-column"),V=n("el-date-picker"),w=n("el-option"),x=n("el-select"),A=n("el-checkbox"),R=n("el-checkbox-group"),q=n("el-radio"),B=n("el-radio-group"),J=n("el-switch"),W=n("el-button"),K=n("el-table"),Q=U("auth"),Y=U("loading");return s(),r("div",F,[v((s(),f(K,{data:T.value,ref_key:"tableRef",ref:D,style:{width:"100%"},class:"responsive-table"},{default:m(()=>[p(d,{"min-width":"100",label:"\u540d\u79f0"},{default:m(({row:e})=>[e.edit?(s(),f(t,{key:0,modelValue:e.title,"onUpdate:modelValue":l=>e.title=l,placeholder:"\u8bf7\u8f93\u5165\u540d\u79f0"},null,8,["modelValue","onUpdate:modelValue"])):(s(),r("span",I,j(e.title),1))]),_:1}),p(d,{"min-width":"200",label:"\u53d8\u91cf\u503c"},{default:m(({row:e})=>[["text","textarea"].includes(e.form_item_type_label)?(s(),f(t,{key:0,modelValue:E.value[e.key],"onUpdate:modelValue":l=>E.value[e.key]=l,type:e.form_item_type_label,placeholder:e.placeholder,clearable:""},null,8,["modelValue","onUpdate:modelValue","type","placeholder"])):"number"===e.form_item_type_label?(s(),f(N,{key:1,modelValue:E.value[e.key],"onUpdate:modelValue":l=>E.value[e.key]=l,placeholder:e.placeholder,style:{width:"100%"},controls:!1},null,8,["modelValue","onUpdate:modelValue","placeholder"])):["datetime","date","time"].includes(e.form_item_type_label)?(s(),f(V,{key:2,modelValue:E.value[e.key],"onUpdate:modelValue":l=>E.value[e.key]=l,type:e.form_item_type_label,placeholder:e.placeholder},null,8,["modelValue","onUpdate:modelValue","type","placeholder"])):"select"===e.form_item_type_label?(s(),f(x,{key:3,modelValue:E.value[e.key],"onUpdate:modelValue":l=>E.value[e.key]=l,placeholder:e.placeholder,clearable:""},{default:m(()=>[(s(!0),r(b,null,_(e.setting||[],e=>(s(),f(w,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):"checkbox"===e.form_item_type_label?(s(),f(R,{key:e.id,modelValue:E.value[e.key],"onUpdate:modelValue":l=>E.value[e.key]=l,placeholder:e.placeholder},{default:m(()=>[(s(!0),r(b,null,_(e.data_options||[],e=>(s(),f(A,{key:e.value,value:e.value},{default:m(()=>[c(j(e.label),1)]),_:2},1032,["value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):"radio"===e.form_item_type_label?(s(),f(B,{key:e.id,modelValue:E.value[e.key],"onUpdate:modelValue":l=>E.value[e.key]=l,placeholder:e.placeholder,clearable:""},{default:m(()=>[(s(!0),r(b,null,_(e.data_options||[],e=>(s(),f(q,{key:e.value,value:e.value},{default:m(()=>[c(j(e.label),1)]),_:2},1032,["value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):"switch"===e.form_item_type_label?(s(),f(J,{key:e.id,modelValue:E.value[e.key],"onUpdate:modelValue":l=>E.value[e.key]=l,"active-color":"#13ce66","inactive-color":"#ff4949"},null,8,["modelValue","onUpdate:modelValue"])):"image"===e.form_item_type_label?(s(),r("div",{key:e.id},[p(L,{modelValue:E.value[e.key],"onUpdate:modelValue":l=>E.value[e.key]=l,disabled:!1,round:!1,cropper:!1,title:"","show-file-list":!1,width:90,height:90},null,8,["modelValue","onUpdate:modelValue"])])):"richtext"===e.form_item_type_label?(s(),f(P,{key:8,modelValue:E.value[e.key],"onUpdate:modelValue":l=>E.value[e.key]=l},null,8,["modelValue","onUpdate:modelValue"])):y("",!0),e.tip?(s(),r("span",M,j(e.tip),1)):y("",!0)]),_:1}),p(d,{"min-width":"150",label:"\u53d8\u91cf\u540d"},{default:m(({row:e})=>[e.edit?(s(),f(t,{key:0,modelValue:e.new_key,"onUpdate:modelValue":l=>e.new_key=l,class:"variable-input",placeholder:"\u8bf7\u8f93\u5165\u53d8\u91cfkey"},{prepend:m(()=>[C("span",G,j(S(h)),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])):(s(),r("span",z,j(S(h))+"."+j(e.key),1))]),_:1}),p(d,{label:"\u64cd\u4f5c",width:"170","class-name":"action-column"},{default:m(({row:e,$index:t})=>[C("div",$,[p(W,{link:"",type:"primary",onClick:l=>(async e=>{try{let t=E.value[e.key];const i=await a.platformsettingsSysconfigEdit({...e,key:e.new_key,value:(l=t,null==l||null==l?"":"string"==typeof l?l:l.toString())});2e3===i.code?(u.success("\u4fdd\u5b58\u6210\u529f"),O(),"base"==g.activeTab&&o("updateConfig")):u.warning(i.msg)}catch(t){u.error("\u4fdd\u5b58\u5931\u8d25")}var l})(e)},{default:m(()=>[...l[0]||(l[0]=[c("\u4fdd\u5b58",-1)])]),_:2},1032,["onClick"]),e.edit?(s(),f(W,{key:0,link:"",onClick:e=>{return l=t,T.value[l].edit=!1,void(T.value[l].new_key=T.value[l].key);var l}},{default:m(()=>[...l[1]||(l[1]=[c("\u53d6\u6d88",-1)])]),_:2},1032,["onClick"])):v((s(),f(W,{key:1,link:"",type:"primary",onClick:e=>{return l=t,void(T.value[l].edit=!0);var l}},{default:m(()=>[...l[2]||(l[2]=[c("\u7f16\u8f91",-1)])]),_:2},1032,["onClick"])),[[Q,"systemConfig:Update"]]),p(S(i),{title:"\u786e\u5b9a\u5220\u9664\u5417\uff1f",onConfirm:l=>(async e=>{try{const l=await a.platformsettingsSysconfigDelete({id:e.id});2e3===l.code?(u.success("\u5220\u9664\u6210\u529f"),O()):u.warning(l.msg)}catch(l){u.error("\u5220\u9664\u5931\u8d25")}})(e)},{reference:m(()=>[v((s(),f(W,{link:"",type:"danger"},{default:m(()=>[...l[3]||(l[3]=[c("\u5220\u9664",-1)])]),_:1})),[[Q,"systemConfig:Delete"]])]),_:2},1032,["onConfirm"])])]),_:1})]),_:1},8,["data"])),[[Y,k.value]])])}}},[["__scopeId","data-v-e851df41"]]),J={class:"lycaozuol"},W={class:"dialog-footer"},K=t({__name:"apiWhiteList",props:{options:{type:Object,default:()=>({})}},emits:["refreshData"],setup(e,{emit:l}){const t=l,o=e,{width:i}=A(),y=h(()=>i.value<768);let g=d(!1),k=h(()=>o.options?.value?o.options?.value:[]),V=d([]),w=d(!1),D=d(null),O=d(!1),P=d({}),L=[{value:"GET",label:"GET"},{value:"POST",label:"POST"},{value:"PUT",label:"PUT"},{value:"DELETE",label:"DELETE"},{value:"OPTIONS",label:"OPTIONS"},{value:"ALL",label:"ALL"}],R={api:[{required:!0,message:"\u8bf7\u8f93\u5165\u63a5\u53e3\u5730\u5740",trigger:"blur"}],method:[{required:!0,message:"\u8bf7\u9009\u62e9\u63a5\u53e3\u65b9\u6cd5",trigger:"blur"}]};function q(e){const l=L.find(l=>l.value===e);return l?l.label:"\u672a\u77e5\u65b9\u6cd5"}function N(e){switch(e){case"GET":return"success";case"POST":return"primary";case"PUT":return"warning";case"DELETE":return"danger";default:return""}}function F(){P.value={},w.value=!0,a.apiSchemeJson().then(e=>{var l=Object.keys(e.paths),a=[];for(const t of l){const e={};e.label=t,e.value=t,a.push(e)}V.value=a}),E(()=>{D.value.resetFields()})}function I(e){return null==e||null==e||"object"!=typeof e?"":Array.isArray(e)?e.length>0&&"object"!=typeof e[0]?"":JSON.stringify(e):""}async function M(){try{await D.value.validate(),O.value=!0;let e=[...k.value,P.value],l={id:o.options.id,value:I(e)};(0,a.platformsettingsSysconfigEdit)(l).then(e=>{O.value=!1,2e3===e.code?(u.success("\u4fdd\u5b58\u6210\u529f"),w.value=!1,t("refreshData")):u.warning(e.msg)})}catch(e){return}}return x(()=>{}),(e,l)=>{const t=n("el-alert"),i=n("el-empty"),d=n("el-table-column"),h=n("el-tag"),x=n("el-button"),E=n("el-popconfirm"),A=n("el-table"),G=n("el-option"),z=n("el-select"),$=n("el-form-item"),B=n("el-col"),K=n("el-row"),Q=n("el-form"),Y=n("el-dialog"),H=U("auth"),X=U("loading");return s(),r("div",null,[p(t,{type:"info","show-icon":""},{default:m(()=>[...l[4]||(l[4]=[c("\u8bf7\u6b63\u786e\u586b\u5199\uff08\u540e\u7aefconfig.py\u4e5f\u6709\u767d\u540d\u5355\u914d\u7f6e\uff0c\u5efa\u8bae\u540e\u7aef\u914d\u7f6e\uff09,\u5339\u914d\u4f7f\u7528\u6b63\u5219,\u5982:/api/xxx/{id}/",-1)])]),_:1}),v((s(),f(A,{data:S(k),class:"lyapitable"},{empty:m(()=>[p(i)]),default:m(()=>[p(d,{"min-width":"150",label:"Api\u5730\u5740",prop:"api","show-overflow-tooltip":""}),p(d,{"min-width":"90",label:"\u8bf7\u6c42\u65b9\u6cd5",prop:"method"},{default:m(({row:e,$index:l})=>[p(h,{type:N(e.method)},{default:m(()=>[c(j(q(e.method)),1)]),_:2},1032,["type"])]),_:1}),p(d,{label:"\u64cd\u4f5c",fixed:"right",width:"90"},{header:m(()=>[C("div",J,[l[5]||(l[5]=C("span",null,"\u64cd\u4f5c",-1)),p(x,{circle:"",size:"small",type:"primary",icon:"Plus",onClick:F})])]),default:m(({row:e,$index:t})=>[C("div",null,[p(E,{title:"\u786e\u5b9a\u5220\u9664\u5417\uff1f",onConfirm:e=>(async(e,l)=>{let t=k.value;t.splice(l,1),g.value=!0;let i={id:o.options.id,value:I(t)};(0,a.platformsettingsSysconfigEdit)(i).then(e=>{g.value=!1,2e3===e.code?u.success("\u5220\u9664\u6210\u529f"):u.warning(e.msg)})})(0,t)},{reference:m(()=>[v((s(),f(x,{link:"",type:"danger"},{default:m(()=>[...l[6]||(l[6]=[c("\u5220\u9664",-1)])]),_:1})),[[H,"systemConfig:Delete"]])]),_:2},1032,["onConfirm"])])]),_:1})]),_:1},8,["data"])),[[X,S(g)]]),p(Y,{modelValue:S(w),"onUpdate:modelValue":l[3]||(l[3]=e=>T(w)?w.value=e:w=e),title:"\u6dfb\u52a0Api\u767d\u540d\u5355",width:"580px",fullscreen:y.value,"close-on-click-modal":!1},{footer:m(()=>[C("span",W,[p(x,{onClick:l[2]||(l[2]=e=>T(w)?w.value=!1:w=!1)},{default:m(()=>[...l[7]||(l[7]=[c("\u53d6\u6d88",-1)])]),_:1}),p(x,{type:"primary",onClick:M,loading:S(O)},{default:m(()=>[...l[8]||(l[8]=[c("\u63d0\u4ea4",-1)])]),_:1},8,["loading"])])]),default:m(()=>[p(Q,{ref_key:"formRefb",ref:D,model:S(P),rules:S(R),"label-width":"auto"},{default:m(()=>[p(K,{gutter:10},{default:m(()=>[p(B,{xs:24,sm:24,md:24,lg:24,xl:24},{default:m(()=>[p($,{label:"\u63a5\u53e3\u5730\u5740",prop:"api"},{default:m(()=>[p(z,{modelValue:S(P).api,"onUpdate:modelValue":l[0]||(l[0]=e=>S(P).api=e),modelModifiers:{trim:!0},filterable:"",clearable:"","allow-create":"",style:{"margin-bottom":"5px",width:"100%"},placeholder:"\u8bf7\u9009\u62e9\u6216\u624b\u52a8\u8f93\u5165"},{default:m(()=>[(s(!0),r(b,null,_(S(V),e=>(s(),f(G,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),p(t,{title:"\u8bf7\u6b63\u786e\u586b\u5199(\u6216\u9009\u62e9)\uff0c\u5339\u914d\u4f7f\u7528\u6b63\u5219,\u5982:/api/xxx/{id}/",type:"info","show-icon":""})]),_:1})]),_:1}),p(B,{xs:24,sm:24,md:24,lg:24,xl:24},{default:m(()=>[p($,{label:"\u8bf7\u6c42\u65b9\u6cd5",prop:"method"},{default:m(()=>[p(z,{modelValue:S(P).method,"onUpdate:modelValue":l[1]||(l[1]=e=>S(P).method=e),placeholder:"\u8bf7\u9009\u62e9",style:{width:"100%"}},{default:m(()=>[(s(!0),r(b,null,_(S(L),e=>(s(),f(G,{label:e.label,value:e.value},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","fullscreen"])])}}},[["__scopeId","data-v-6168071b"]]),Q=D({name:"systemConfig"}),Y=t(Object.assign(Q,{setup(e){const l=o();let t=d("base"),u=d([]),i=d(null),y=d(null);function g(e){"addgroup"==e?y.value.addModuleFn("","\u65b0\u589e\u5206\u7ec4"):"addcontent"==e&&i.value.addModuleFn("","\u65b0\u589e\u914d\u7f6e\u9879")}function h(){a.platformsettingsSysconfig({limit:999,parent__isnull:!0}).then(e=>{2e3==e.code&&(u.value=e.data.data)})}const k=d([]);function V(e){if(e.key==t.value){const a=(l=e.key,k.value[l]);a&&a.fetchData()}var l;"base"==t.value&&w()}function w(){l.getSystemConfig()}return x(()=>{h()}),O(()=>{}),(e,l)=>{const a=n("el-button"),o=n("el-tab-pane"),d=n("el-tabs"),x=n("el-empty"),j=n("el-card"),E=U("auth");return s(),f(j,{shadow:"hover",class:"lyccontainer"},{header:m(()=>[C("div",null,[v((s(),f(a,{icon:"Plus",type:"primary",onClick:l[0]||(l[0]=e=>g("addgroup"))},{default:m(()=>[...l[3]||(l[3]=[c(" \u65b0\u589e\u5206\u7ec4 ",-1)])]),_:1})),[[E,"CreateGroup"]]),v((s(),f(a,{icon:"Plus",type:"primary",onClick:l[1]||(l[1]=e=>g("addcontent"))},{default:m(()=>[...l[4]||(l[4]=[c(" \u65b0\u589e\u914d\u7f6e\u9879 ",-1)])]),_:1})),[[E,"CreateContent"]])])]),default:m(()=>[S(u).length>0?(s(),f(d,{key:0,type:"border-card",modelValue:S(t),"onUpdate:modelValue":l[2]||(l[2]=e=>T(t)?t.value=e:t=e)},{default:m(()=>[(s(!0),r(b,null,_(S(u),(e,l)=>(s(),f(o,{key:l,label:e.title,name:e.key},{default:m(()=>["apiWhiteList"==e.key?(s(),f(K,{key:0,options:e,onRefreshData:h},null,8,["options"])):(s(),f(B,{key:1,ref_for:!0,ref:l=>((e,l)=>{e&&(k.value[l.key]=e)})(l,e),options:e,activeTab:S(t),onUpdateConfig:w},null,8,["options","activeTab"]))]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])):(s(),f(x,{key:1})),p(R,{ref_key:"addGroupFlag",ref:y,onRefreshData:h},null,512),p(q,{ref_key:"addContentFlag",ref:i,onRefreshData:V},null,512)]),_:1})}}}),[["__scopeId","data-v-d31d9e1a"]]);export{Y as default};
